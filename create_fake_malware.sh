#!/bin/bash
# SafeBox Fake Malware Generator - Creates realistic test samples for demo

SAMPLES_DIR="./test-samples/fake-malware"
mkdir -p "$SAMPLES_DIR"

echo "ðŸ§ª Creating fake malware samples for demonstration..."

# 1. Trojan Sample
cat > "$SAMPLES_DIR/trojan_backdoor.sh" << 'EOF'
#!/bin/bash
# Fake Trojan - Simulates backdoor behavior (NO ACTUAL HARM)
echo "[*] Trojan: Establishing backdoor..."
sleep 2
echo "[*] Creating fake persistence mechanism..."
touch /tmp/.trojan_marker_$$ 2>/dev/null
echo "[*] Attempting fake C&C communication..."
echo "GET /command HTTP/1.1" | nc -w 1 127.0.0.1 80 2>/dev/null || true
sleep 3
rm -f /tmp/.trojan_marker_$$ 2>/dev/null
echo "[+] Trojan simulation completed"
EOF
chmod +x "$SAMPLES_DIR/trojan_backdoor.sh"

# 2. Ransomware Sample
cat > "$SAMPLES_DIR/ransomware_simulator.sh" << 'EOF'
#!/bin/bash
# Fake Ransomware - Simulates encryption behavior (NO FILES ENCRYPTED)
echo "[*] Ransomware: Scanning for files..."
sleep 1
echo "[*] Simulating file encryption process..."
for i in {1..20}; do
    echo "[*] Encrypting file_$i (simulated)"
    sleep 0.2
done
echo "[*] Creating ransom note..."
cat > /tmp/RANSOM_NOTE_$$.txt << 'RANSOM'
Your files have been encrypted!
Send 5 BTC to recover them.
RANSOM
cat /tmp/RANSOM_NOTE_$$.txt
rm -f /tmp/RANSOM_NOTE_$$.txt
echo "[+] Ransomware simulation completed"
EOF
chmod +x "$SAMPLES_DIR/ransomware_simulator.sh"

# 3. Worm Sample
cat > "$SAMPLES_DIR/worm_propagate.sh" << 'EOF'
#!/bin/bash
# Fake Worm - Simulates self-propagation (NO NETWORK SPREAD)
echo "[*] Worm: Initiating self-propagation..."
sleep 1
echo "[*] Scanning for network shares..."
ls -la /mnt 2>/dev/null | head -3
echo "[*] Attempting to spread to connected systems..."
ping -c 1 192.168.1.1 2>/dev/null || true
echo "[*] Creating child processes..."
for i in {1..5}; do
    (sleep 2) &
done
wait
echo "[+] Worm simulation completed"
EOF
chmod +x "$SAMPLES_DIR/worm_propagate.sh"

# 4. Botnet Sample
cat > "$SAMPLES_DIR/botnet_agent.sh" << 'EOF'
#!/bin/bash
# Fake Botnet - Simulates bot agent behavior (NO ACTUAL C&C)
echo "[*] Botnet Agent: Starting command receiver..."
sleep 1
echo "[*] Connecting to C&C server..."
echo "REGISTER bot_$RANDOM" 
sleep 2
echo "[*] Listening for commands..."
echo "[*] Simulated command: DDoS attack (not executed)"
echo "[*] Simulated command: Credential theft (not executed)"
echo "[*] Simulated command: Spam campaign (not executed)"
sleep 3
echo "[+] Botnet simulation completed"
EOF
chmod +x "$SAMPLES_DIR/botnet_agent.sh"

# 5. Spyware Sample
cat > "$SAMPLES_DIR/spyware_keylogger.sh" << 'EOF'
#!/bin/bash
# Fake Spyware - Simulates keylogger behavior (NO ACTUAL LOGGING)
echo "[*] Spyware: Installing keylogger hook..."
sleep 1
echo "[*] Intercepting keyboard events..."
sleep 2
echo "[*] Captured data:"
echo "user:password123"
echo "credit_card:1234-5678-9012-3456"
echo "[*] Encrypting stolen data..."
sleep 1
echo "[*] Sending to attacker: fake-attacker.com"
echo "POST /exfil HTTP/1.1" 
sleep 2
echo "[+] Spyware simulation completed"
EOF
chmod +x "$SAMPLES_DIR/spyware_keylogger.sh"

# 6. Rootkit Sample
cat > "$SAMPLES_DIR/rootkit_kernel.sh" << 'EOF'
#!/bin/bash
# Fake Rootkit - Simulates kernel-level hiding (NO ACTUAL EXPLOIT)
echo "[*] Rootkit: Attempting kernel module injection..."
sleep 1
echo "[*] Hiding malicious processes from ps output..."
echo "[*] Installing syscall hooks..."
sleep 2
echo "[*] Modifying system binaries..."
echo "[*] Creating backdoor user account..."
echo "Adding user: admin_backup with UID 0"
sleep 2
echo "[*] Hiding rootkit artifacts..."
echo "[+] Rootkit simulation completed"
EOF
chmod +x "$SAMPLES_DIR/rootkit_kernel.sh"

# 7. Adware Sample
cat > "$SAMPLES_DIR/adware_popups.sh" << 'EOF'
#!/bin/bash
# Fake Adware - Simulates ad injection (NO ACTUAL DISPLAY)
echo "[*] Adware: Injecting advertisements..."
for i in {1..10}; do
    echo "[AD] Click here to win FREE money!"
    echo "[AD] Your computer is slow - buy FAST utility!"
    sleep 0.5
done
echo "[*] Modifying browser homepage..."
echo "[*] Installing toolbar extensions..."
echo "[*] Collecting browsing data..."
sleep 2
echo "[+] Adware simulation completed"
EOF
chmod +x "$SAMPLES_DIR/adware_popups.sh"

# 8. Cryptominer Sample
cat > "$SAMPLES_DIR/cryptominer.sh" << 'EOF'
#!/bin/bash
# Fake Cryptominer - Simulates mining behavior (NO ACTUAL MINING)
echo "[*] Cryptominer: Initializing mining engine..."
sleep 1
echo "[*] Connecting to mining pool..."
sleep 2
echo "[*] Starting hash computation..."
for i in {1..15}; do
    echo "[HASH] Processing block $i..."
    sleep 0.3
done
echo "[*] Submitting shares to pool..."
echo "[+] Cryptominer simulation completed"
EOF
chmod +x "$SAMPLES_DIR/cryptominer.sh"

echo "âœ… Fake malware samples created in: $SAMPLES_DIR"
echo ""
echo "ðŸ“‹ Available samples:"
ls -1 "$SAMPLES_DIR/" | while read file; do
    echo "   â€¢ $file"
done

echo ""
echo "âš ï¸  IMPORTANT:"
echo "   These are HARMLESS simulations for TESTING ONLY"
echo "   They create NO actual harm to your system"
echo "   Use in SafeBox sandbox only"
